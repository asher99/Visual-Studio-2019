{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\\\u05D0\\u05E9\\u05E8 \\u05D0\\u05DC\\u05DB\\u05E1\\u05E0\\u05D3\\u05E8\\\\Documents\\\\Visual Studio 2019\\\\project_smart_distribution\\\\socket-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{Component}from'react';import{render}from'react-dom';import'./style.css';import'bootstrap/dist/css/bootstrap.css';import{Glyphicon}from'react-bootstrap';import socketIOClient from\"socket.io-client\";class Chat extends Component{constructor({match}){super();this.componentDidMount=()=>{document.body.classList.toggle('chat');this.setState({name:this.getShortName(this.userName.name)});const socket=socketIOClient(this.state.endpoint);socket.on('message',message=>{if(message.name!==this.state.name){let arr=this.state.allMessages;arr.push(message);this.setState({allMessages:arr});}});};this.send=()=>{let newMessage={type:'send',content:this.state.message,name:this.state.name,time:this.getTime()};let arr=this.state.allMessages;arr.push(newMessage);this.setState({allMessages:arr});this.setState({message:''});let sendMessage=_objectSpread({},newMessage);sendMessage.type=\"recieve\";const socket=socketIOClient(this.state.endpoint);socket.emit('message',sendMessage);};this.userName=match.params;this.state={endpoint:\"localhost:4001\",message:'',name:'',allMessages:[]};this.updateMessage=this.updateMessage.bind(this);}componentWillUnmount(){document.body.classList.remove('chat');}updateMessage(e){this.setState({message:e.target.value});}render(){const socket=socketIOClient(this.state.endpoint);return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid h-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center h-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 col-xl-6 chat\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header msg_head\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex bd-highlight\"},/*#__PURE__*/React.createElement(\"div\",{className:\"img_cont\"},/*#__PURE__*/React.createElement(\"div\",{className:\"rounded-circle user_img userNameCard\"},this.state.name),/*#__PURE__*/React.createElement(\"span\",{className:\"online_icon\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"user_info\"},/*#__PURE__*/React.createElement(\"span\",null,\"Chat\"),/*#__PURE__*/React.createElement(\"p\",null,this.state.allMessages.length,\" Messages\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body msg_card_body\"},this.renederMessages()),/*#__PURE__*/React.createElement(\"div\",{className:\"card-footer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"textarea\",{name:\"\",className:\"roundCorner form-control type_msg \",placeholder:\"Type your message...\",value:this.state.message,onChange:this.updateMessage}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-append\"},/*#__PURE__*/React.createElement(\"span\",{onClick:this.send,className:\"input-group-text send_btn costumSendBtn\"},/*#__PURE__*/React.createElement(Glyphicon,{glyph:\"send\"})))))))));}getTime(){let date=new Date();return date.getHours()+\":\"+date.getMinutes()+\":\"+date.getSeconds();}getShortName(name){let short='';let arr=name.split(\" \");arr.forEach(function(name){short+=name.charAt(0);});return short.toUpperCase();}renederMessages(){return this.state.allMessages.map(message=>this.getMessage(message));}getMessage(message){if(message.type=='send'){return/*#__PURE__*/React.createElement(\"div\",{key:message.time,className:\"d-flex justify-content-end mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"msg_cotainer_send\"},message.content,/*#__PURE__*/React.createElement(\"span\",{className:\"msg_time_send\"},message.time)),/*#__PURE__*/React.createElement(\"div\",{className:\"img_cont_msg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"rounded-circle user_img_msg littleCircle\"},this.state.name)));}if(message.type=='recieve'){return/*#__PURE__*/React.createElement(\"div\",{key:message.time,className:\"d-flex justify-content-start mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"img_cont_msg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"rounded-circle user_img_msg littleCircleStart\"},message.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"msg_cotainer\"},message.content,/*#__PURE__*/React.createElement(\"span\",{className:\"msg_time\"},message.time)));}}}export default Chat;","map":{"version":3,"sources":["C:/Users/אשר אלכסנדר/Documents/Visual Studio 2019/project_smart_distribution/socket-client/src/chat.js"],"names":["React","Component","render","Glyphicon","socketIOClient","Chat","constructor","match","componentDidMount","document","body","classList","toggle","setState","name","getShortName","userName","socket","state","endpoint","on","message","arr","allMessages","push","send","newMessage","type","content","time","getTime","sendMessage","emit","params","updateMessage","bind","componentWillUnmount","remove","e","target","value","length","renederMessages","date","Date","getHours","getMinutes","getSeconds","short","split","forEach","charAt","toUpperCase","map","getMessage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { render } from 'react-dom';\r\nimport './style.css';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport { Glyphicon } from 'react-bootstrap';\r\nimport socketIOClient from \"socket.io-client\";\r\n\r\nclass Chat extends Component {\r\n  constructor({match}) {\r\n    super();\r\n    this.userName = match.params;\r\n    this.state = {\r\n      endpoint: \"localhost:4001\",\r\n      message:'',\r\n      name:'',\r\n      allMessages:[]\r\n    };\r\n  \r\n  \r\n\r\n    this.updateMessage = this.updateMessage.bind(this);\r\n  \r\n  }\r\n\r\n  componentDidMount = () => {\r\n\t   document.body.classList.toggle('chat');\r\n\t   \r\n     this.setState({name: this.getShortName(this.userName.name)});\r\n      const socket = socketIOClient(this.state.endpoint);\r\n      \r\n      socket.on('message', (message) => {\r\n\t\t  if(message.name !== this.state.name)\r\n\t\t  {\r\n\t\t\t let arr = this.state.allMessages;\r\n\t\t\t  arr.push(message);\r\n\t\t\t  this.setState({allMessages: arr});\r\n\t\t  }\r\n      })\r\n\r\n  }\r\n  componentWillUnmount() {\r\n    document.body.classList.remove('chat')\r\n  }\r\n\r\n\r\n   updateMessage(e) {\r\n      this.setState({message: e.target.value});\r\n   }\r\n\r\n  render() {\r\n    const socket = socketIOClient(this.state.endpoint);\r\n    return (\r\n    <div className=\"container-fluid h-100\">\r\n\t\t\t<div className=\"row justify-content-center h-100\">\r\n\t\t\t\r\n\t\t\t\t<div className=\"col-md-8 col-xl-6 chat\">\r\n\t\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t\t<div className=\"card-header msg_head\">\r\n\t\t\t\t\t\t\t<div className=\"d-flex bd-highlight\">\r\n\t\t\t\t\t\t\t\t<div className=\"img_cont\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"rounded-circle user_img userNameCard\">{this.state.name}</div>\r\n\t\t\t\t\t\t\t\t\t<span className=\"online_icon\"></span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"user_info\">\r\n\t\t\t\t\t\t\t\t\t<span>Chat</span>\r\n\t\t\t\t\t\t\t\t\t<p>{this.state.allMessages.length} Messages</p>\r\n                  \r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"card-body msg_card_body\">\r\n\r\n            {this.renederMessages()}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"card-footer\">\r\n\t\t\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<textarea name=\"\" className=\"roundCorner form-control type_msg \" placeholder=\"Type your message...\"  value = {this.state.message} \r\n               onChange = {this.updateMessage}></textarea>\r\n\t\t\t\t\t\t\t\t<div className=\"input-group-append\">\r\n\t\t\t\t\t\t\t\t\t<span onClick={this.send}className=\"input-group-text send_btn costumSendBtn\"><Glyphicon             \r\n                      glyph=\"send\"/></span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n    \r\n    );\r\n\r\n\r\n  }\r\n  send = ()=>\r\n  { \r\n    let newMessage={\r\n    type:'send',\r\n    content:this.state.message,\r\n    name:this.state.name,\r\n    time: this.getTime()\r\n   }\r\n   let arr = this.state.allMessages;\r\n   arr.push(newMessage);\r\n   this.setState({allMessages: arr});\r\n   this.setState({message: ''});\r\n\r\n    let sendMessage = {...newMessage};\r\n    sendMessage.type = \"recieve\";\r\n    const socket = socketIOClient(this.state.endpoint);\r\n    socket.emit('message', sendMessage)\r\n\r\n  }\r\n  getTime(){\r\n    let date = new Date();\r\n    return date.getHours()+\":\"+date.getMinutes()+\":\"+date.getSeconds();\r\n  }\r\n\r\n  getShortName(name){\r\n    let short = '';\r\n    let arr = name.split(\" \")\r\n    arr.forEach(function(name) {\r\n      short+=name.charAt(0);\r\n    });\r\n    return short.toUpperCase();\r\n    \r\n  }\r\n\r\n  renederMessages(){\r\n    return this.state.allMessages.map(message=>this.getMessage(message));\r\n  }\r\n\r\n  getMessage(message){\r\n    if(message.type == 'send'){\r\n\r\n      return <div key={message.time} className=\"d-flex justify-content-end mb-4\">\r\n\t\t\t\t\t\t\t\t<div className=\"msg_cotainer_send\">\r\n\t\t\t\t\t\t\t\t\t{message.content}\r\n\t\t\t\t\t\t\t\t\t<span className=\"msg_time_send\">{message.time}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"img_cont_msg\">\r\n\t\t\t\t\t\t\t<div className=\"rounded-circle user_img_msg littleCircle\">{this.state.name}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>;\r\n    }\r\n\r\n    if(message.type == 'recieve'){\r\n\r\n      return <div key={message.time} className=\"d-flex justify-content-start mb-4\">\r\n\t\t\t\t\t\t\t\t<div className=\"img_cont_msg\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"rounded-circle user_img_msg littleCircleStart\">{message.name}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"msg_cotainer\">\r\n\t\t\t\t\t\t\t\t\t{message.content}\r\n\t\t\t\t\t\t\t\t\t<span className=\"msg_time\">{message.time}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>;\r\n    }\r\n\r\n \r\n\r\n\r\n  }\r\n}\r\n\r\nexport default Chat;\r\n\r\n"]},"metadata":{},"sourceType":"module"}